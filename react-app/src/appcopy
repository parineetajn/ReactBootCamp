class App extends Component {
state = {
  persons:[
    { name:'Parineeta',age:24},
    {name:'Mohit', age:25},
    {name:'Jai', age:25}
  ],
  showPersons:false
}

clickHandler = (newName)=>{
  //console.log('was clicked!! ');
  this.setState({ 
    persons:[
    {id:'ee', name:newName,age:24},
    {id:'ww',name:'Mohit', age:25},
    {id:'tt',name:'Jai', age:26}
  ]
})
}

nameChangedHandler=(event,id)=>{
  const personIndex =this.state.persons.findIndex(p=>{
  return p.id===id;
  });

  const person ={
   ...this.state.persons[personIndex]
  };

  person.name=event.target.value;

  const persons=[...this.state.persons];
  persons[personIndex]=person;


  this.setState({ 
    persons:persons}
    );
}

togglePersonHandler =()=>{
const doesShow=this.state.showPersons;
this.setState({showPersons:!doesShow});
}

deletePersonHandler=(personIndex)=>{
//const persons =this.state.persons.slice;
const persons =[...this.state.persons];
persons.splice(personIndex,1);
this.setState({persons:persons})
}

  render() {

    const style={
      backgroundColor:'yellow',
      cursor: 'pointer',
      padding: '8px'
    };

    let persons = null;

    if(this.state.showPersons){
      persons=(
        <div>
          {this.state.persons.map((person,index) =>{
            return <Person 
            click={()=>this.deletePersonHandler(index)}
            name={person.name}
            age={person.age} 
            key={person.id}
            changed={(event)=>this.nameChangedHandler(event,person.id)}/>
          })}
        </div>
      );
    }

    return (
      <div className="App">
     <h1>Hi this is my first react app</h1>
     <button
     style={style}
      onClick={this.togglePersonHandler}>Click</button>
      {persons}     
      </div>
    );
  }
}